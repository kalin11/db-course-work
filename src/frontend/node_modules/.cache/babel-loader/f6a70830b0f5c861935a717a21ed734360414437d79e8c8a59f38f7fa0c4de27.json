{"ast":null,"code":"import Header from\"../components/headers/Header\";import Selector from\"../components/selects/Selector\";import{useEffect}from\"react\";import axios from\"../config/axios\";import Button from\"../components/buttons/Button\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Course=_ref=>{let{courses,selectedCourse,handleSelectCourse,setCourses}=_ref;const navigate=useNavigate();useEffect(()=>{const getCourses=()=>{return axios.get('/courses',{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{return response.data;}).catch(error=>{if(error.response.status===403){return axios.post('/auth/logout',null,{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{sessionStorage.clear();;;navigate('/');return response.data;}).catch(error=>{return error;});}return error;});};const getData=async()=>{let courses=await getCourses();let list=[];for(let i=0;i<courses.length;i++){let course_number=courses[i].course_number;let desc=courses[i].description;list.push({course_number:course_number,description:desc});}setCourses(list);};getData().catch(console.error);},[setCourses]);const handleButton=()=>{navigate('/subjects?course='+selectedCourse);};return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-[200px]\",children:[/*#__PURE__*/_jsx(Selector,{courses:courses,selectedCourse:selectedCourse,handleSelectCourse:handleSelectCourse}),/*#__PURE__*/_jsx(Button,{text:\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043F\\u0440\\u0435\\u0434\\u043C\\u0435\\u0442\\u044B\",handleButton:handleButton})]})]});};export default Course;","map":{"version":3,"names":["Header","Selector","useEffect","axios","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","Course","_ref","courses","selectedCourse","handleSelectCourse","setCourses","navigate","getCourses","get","headers","withCredentials","then","response","data","catch","error","status","post","sessionStorage","clear","getData","list","i","length","course_number","desc","description","push","console","handleButton","className","children","text"],"sources":["/home/kalin/WebstormProjects/tinkoff-backend-academy-frontend/src/pages/Course.js"],"sourcesContent":["import Header from \"../components/headers/Header\";\nimport Selector from \"../components/selects/Selector\";\nimport {useEffect} from \"react\";\nimport axios from \"../config/axios\";\nimport Button from \"../components/buttons/Button\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst Course = ({courses, selectedCourse, handleSelectCourse, setCourses}) => {\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n\n        const getCourses = () => {\n            return axios\n                .get('/courses', {\n                    headers: {\n                        \"Access-Control-Allow-Origin\": \"*\"\n                    },\n                    withCredentials: true\n                })\n                .then((response) => {\n                    return response.data;\n                })\n                .catch((error) => {\n                    if (error.response.status === 403) {\n                        return axios\n                            .post('/auth/logout', null, {\n                                headers: {\n                                    \"Access-Control-Allow-Origin\": \"*\"\n                                },\n                                withCredentials: true\n                            })\n                            .then((response) => {\n                                sessionStorage.clear();\n                                ;\n                                ;\n                                navigate('/');\n                                return response.data;\n                            })\n                            .catch((error) => {\n                                return error;\n                            })\n                    }\n                    return error;\n                });\n        }\n\n        const getData = async () => {\n            let courses = await getCourses();\n\n            let list = [];\n            for (let i = 0; i < courses.length; i++) {\n                let course_number = courses[i].course_number;\n                let desc = courses[i].description;\n                list.push(\n                    {\n                        course_number: course_number,\n                        description: desc\n                    }\n                );\n            }\n\n            setCourses(list);\n        }\n\n        getData().catch(console.error);\n\n    }, [setCourses]);\n\n    const handleButton = () => {\n        navigate('/subjects?course=' + selectedCourse);\n    }\n\n    return (\n        <div className=\"\">\n            <Header/>\n            <div className=\"mt-[200px]\">\n                <Selector courses={courses} selectedCourse={selectedCourse} handleSelectCourse={handleSelectCourse}/>\n                <Button text=\"Показать предметы\" handleButton={handleButton}/>\n            </div>\n\n        </div>\n    );\n}\n\nexport default Course;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}