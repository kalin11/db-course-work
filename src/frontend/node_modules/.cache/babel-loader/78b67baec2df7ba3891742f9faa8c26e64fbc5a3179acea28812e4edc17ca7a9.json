{"ast":null,"code":"import axios from\"../config/axios\";import{useEffect,useState}from\"react\";import Header from\"../components/headers/Header\";import SubjectTopicForm from\"../components/form/SubjectTopicForm\";import SubjectTopicList from\"../components/items/SubjectTopicList\";import{useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SubjectTopic=_ref=>{let{topics,setTopics,topicType,setSelectedTopicType,course,allTopics,setAllTopics,subjectTopicId,setSubjectTopicId}=_ref;const{id}=useParams();const[pageNumber,setPageNumber]=useState(0);const[pageSize,setPageSize]=useState(3);const[totalPages,setTotalPages]=useState(10);const navigate=useNavigate();const[isBanned,setIsBanned]=useState(false);useEffect(()=>{const getTopics=()=>{console.log(id);return axios.get('/subject-topics',{params:{pageNumber:pageNumber,pageSize:pageSize,subjectId:parseInt(id)},headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{return response.data;}).catch(error=>{if(error.response.status===403){if(error.response.message===\"У вас недостаточно прав для выполнения данного действия\"){console.log(error.response);}else return axios.post('/auth/logout',null,{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{setIsBanned(true);navigate('/');return response.data;}).catch(error=>{return error;});}return error;});};const getAllTopics=()=>{return axios.get('/topics',{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{return response.data;}).catch(error=>{if(error.response.status===403){if(error.response.message===\"У вас недостаточно прав для выполнения данного действия\"){console.log(error.response);}else return axios.post('/auth/logout',null,{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{sessionStorage.clear();setIsBanned(true);navigate('/');return response.data;}).catch(error=>{return error;});}return error;});};const getDataAllTopics=async()=>{let allTopics=await getAllTopics();setAllTopics(allTopics);};const getData=async()=>{let topics=await getTopics();console.log(topics);let list=[];for(let i=0;i<topics.content.length;i++){let subject_topic_id=topics.content[i].id;let id=topics.content[i].topic.id;let topic_type=topics.content[i].topic.topic_type;list.push({id:subject_topic_id,topic:{id,topic_type}});}setTopics(list);};getData().catch(console.error);getDataAllTopics().catch(console.error);},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-[200px]\",children:[!isBanned&&/*#__PURE__*/_jsx(SubjectTopicList,{topics:topics,selectedTopic:topicType,setSelectedTopic:setSelectedTopicType,setSubjectTopicId:setSubjectTopicId,selectedSubjectTopicId:subjectTopicId}),sessionStorage.getItem('user')!==null&&/*#__PURE__*/_jsx(SubjectTopicForm,{topics:allTopics,selectedTopic:topicType,setSelectedTopic:setSelectedTopicType,course:course,subjectId:id})]})]});};export default SubjectTopic;","map":{"version":3,"names":["axios","useEffect","useState","Header","SubjectTopicForm","SubjectTopicList","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","SubjectTopic","_ref","topics","setTopics","topicType","setSelectedTopicType","course","allTopics","setAllTopics","subjectTopicId","setSubjectTopicId","id","pageNumber","setPageNumber","pageSize","setPageSize","totalPages","setTotalPages","navigate","isBanned","setIsBanned","getTopics","console","log","get","params","subjectId","parseInt","headers","withCredentials","then","response","data","catch","error","status","message","post","getAllTopics","sessionStorage","clear","getDataAllTopics","getData","list","i","content","length","subject_topic_id","topic","topic_type","push","children","className","selectedTopic","setSelectedTopic","selectedSubjectTopicId","getItem"],"sources":["/home/kalin/WebstormProjects/tinkoff-backend-academy-frontend/src/pages/SubjectTopic.js"],"sourcesContent":["import axios from \"../config/axios\";\nimport {useEffect, useState} from \"react\";\nimport Header from \"../components/headers/Header\";\nimport SubjectTopicForm from \"../components/form/SubjectTopicForm\";\nimport SubjectTopicList from \"../components/items/SubjectTopicList\";\nimport {useNavigate, useParams} from \"react-router-dom\";\n\nconst SubjectTopic = ({\n                          topics,\n                          setTopics,\n                          topicType,\n                          setSelectedTopicType,\n                          course,\n                          allTopics,\n                          setAllTopics,\n                          subjectTopicId,\n                          setSubjectTopicId\n                      }) => {\n\n    const {id} = useParams();\n\n    const [pageNumber, setPageNumber] = useState(0);\n    const [pageSize, setPageSize] = useState(3);\n    const [totalPages, setTotalPages] = useState(10);\n    const navigate = useNavigate();\n\n    const [isBanned, setIsBanned] = useState(false);\n\n    useEffect(() => {\n\n        const getTopics = () => {\n            console.log(id);\n            return axios\n                .get('/subject-topics',\n                    {\n                        params: {\n                            pageNumber: pageNumber,\n                            pageSize: pageSize,\n                            subjectId: parseInt(id)\n                        },\n                        headers: {\n                            \"Access-Control-Allow-Origin\": \"*\"\n                        },\n                        withCredentials: true\n                    }\n                )\n                .then((response) => {\n                    return response.data;\n                })\n                .catch((error) => {\n                    if (error.response.status === 403) {\n                        if (error.response.message === \"У вас недостаточно прав для выполнения данного действия\") {\n                            console.log(error.response);\n                        } else return axios\n                            .post('/auth/logout', null, {\n                                headers: {\n                                    \"Access-Control-Allow-Origin\": \"*\"\n                                },\n                                withCredentials: true\n                            })\n                            .then((response) => {\n                                setIsBanned(true);\n                                navigate('/');\n                                return response.data;\n                            })\n                            .catch((error) => {\n                                return error;\n                            })\n                    }\n                    return error;\n                })\n        }\n\n        const getAllTopics = () => {\n            return axios\n                .get('/topics',\n                    {\n                        headers: {\n                            \"Access-Control-Allow-Origin\": \"*\"\n                        },\n                        withCredentials: true\n                    })\n                .then((response) => {\n                    return response.data;\n                })\n                .catch((error) => {\n                    if (error.response.status === 403) {\n                        if (error.response.message === \"У вас недостаточно прав для выполнения данного действия\") {\n                            console.log(error.response);\n                        } else return axios\n                            .post('/auth/logout', null, {\n                                headers: {\n                                    \"Access-Control-Allow-Origin\": \"*\"\n                                },\n                                withCredentials: true\n                            })\n                            .then((response) => {\n                                sessionStorage.clear();\n                                setIsBanned(true);\n                                navigate('/');\n                                return response.data;\n                            })\n                            .catch((error) => {\n                                return error;\n                            })\n                    }\n                    return error;\n                })\n        };\n\n        const getDataAllTopics = async () => {\n            let allTopics = await getAllTopics();\n            setAllTopics(allTopics);\n        }\n\n        const getData = async () => {\n            let topics = await getTopics();\n            console.log(topics);\n            let list = [];\n            for (let i = 0; i < topics.content.length; i++) {\n                let subject_topic_id = topics.content[i].id;\n                let id = topics.content[i].topic.id;\n                let topic_type = topics.content[i].topic.topic_type;\n                list.push(\n                    {\n                        id: subject_topic_id,\n                        topic: {\n                            id,\n                            topic_type\n                        }\n                    }\n                );\n            }\n            setTopics(list);\n        }\n\n        getData().catch(console.error);\n        getDataAllTopics().catch(console.error);\n    }, []);\n\n    return (\n        <div>\n            <Header/>\n            <div className=\"mt-[200px]\">\n                {!isBanned &&\n                    <SubjectTopicList topics={topics}\n                                      selectedTopic={topicType}\n                                      setSelectedTopic={setSelectedTopicType}\n                                      setSubjectTopicId={setSubjectTopicId}\n                                      selectedSubjectTopicId={subjectTopicId}\n                    />\n                }\n                {\n                    (sessionStorage.getItem('user') !== null) &&\n                    <SubjectTopicForm topics={allTopics}\n                                      selectedTopic={topicType}\n                                      setSelectedTopic={setSelectedTopicType}\n                                      course={course}\n                                      subjectId={id}/>\n                }\n\n            </div>\n        </div>\n    )\n\n}\n\nexport default SubjectTopic;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}