{"ast":null,"code":"import{useState}from\"react\";import axios from\"../../config/axios\";import TopicSelector from\"../selects/TopicSelector\";import Button from\"../buttons/Button\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SubjectForm=_ref=>{let{topics,selectedTopic,setSelectedTopic,course,subjectId}=_ref;const[topicTitle,setTopicTitle]=useState('');const navigate=useNavigate();const handleTopicTitle=event=>{event.preventDefault();setTopicTitle(event.target.value);};const createNewSubjectTopic=event=>{event.preventDefault();console.log(event.target);return axios.post('/subject-topics',{course_number:course,subject_id:subjectId,topic_id:selectedTopic},{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{return response.data;}).catch(error=>{if(error.response.status===403){if(error.response.message===\"У вас недостаточно прав для выполнения данного действия\"){console.log(error.response);}else return axios.post('/auth/logout',null,{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{sessionStorage.clear();;navigate('/');return response.data;}).catch(error=>{return error;});}console.log(error.response.data);return error.response.data;});};return/*#__PURE__*/_jsx(\"div\",{className:\"form min-w-[900px] max-w-[80vw] mx-auto flex justify-center\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\" mt-[200px]\",children:[/*#__PURE__*/_jsx(TopicSelector,{topics:topics,selectedTopic:selectedTopic,handleSelectedTopic:setSelectedTopic}),/*#__PURE__*/_jsx(Button,{text:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0442\\u043E\\u043F\\u0438\\u043A\",handleButton:createNewSubjectTopic})]})})});};export default SubjectForm;","map":{"version":3,"names":["useState","axios","TopicSelector","Button","useNavigate","jsx","_jsx","jsxs","_jsxs","SubjectForm","_ref","topics","selectedTopic","setSelectedTopic","course","subjectId","topicTitle","setTopicTitle","navigate","handleTopicTitle","event","preventDefault","target","value","createNewSubjectTopic","console","log","post","course_number","subject_id","topic_id","headers","withCredentials","then","response","data","catch","error","status","message","sessionStorage","clear","className","children","handleSelectedTopic","text","handleButton"],"sources":["/home/kalin/WebstormProjects/tinkoff-backend-academy-frontend/src/components/form/SubjectTopicForm.js"],"sourcesContent":["import {useState} from \"react\";\nimport axios from \"../../config/axios\";\nimport TopicSelector from \"../selects/TopicSelector\";\nimport Button from \"../buttons/Button\";\nimport {useNavigate} from \"react-router-dom\";\n\nconst SubjectForm = ({topics, selectedTopic, setSelectedTopic, course, subjectId}) => {\n\n    const [topicTitle, setTopicTitle] = useState('');\n\n    const navigate = useNavigate();\n\n\n    const handleTopicTitle = (event) => {\n        event.preventDefault();\n        setTopicTitle(event.target.value);\n    }\n\n    const createNewSubjectTopic = (event) => {\n        event.preventDefault();\n        console.log(event.target);\n\n        return axios\n            .post('/subject-topics',\n                {\n                    course_number: course,\n                    subject_id: subjectId,\n                    topic_id: selectedTopic\n                },\n                {\n                    headers: {\n                        \"Access-Control-Allow-Origin\": \"*\"\n                    },\n                    withCredentials: true\n                }\n            )\n            .then((response) => {\n                return response.data;\n            })\n            .catch((error) => {\n                if (error.response.status === 403) {\n                    if (error.response.message === \"У вас недостаточно прав для выполнения данного действия\") {\n                        console.log(error.response);\n                    } else return axios\n                        .post('/auth/logout', null, {\n                            headers: {\n                                \"Access-Control-Allow-Origin\": \"*\"\n                            },\n                            withCredentials: true\n                        })\n                        .then((response) => {\n                            sessionStorage.clear();\n                            ;\n                            navigate('/');\n                            return response.data;\n                        })\n                        .catch((error) => {\n                            return error;\n                        })\n                }\n                console.log(error.response.data);\n                return error.response.data;\n            });\n\n    }\n\n    return (\n        <div className=\"form min-w-[900px] max-w-[80vw] mx-auto flex justify-center\">\n            <form>\n                <div className=\" mt-[200px]\">\n                    <TopicSelector topics={topics} selectedTopic={selectedTopic}\n                                   handleSelectedTopic={setSelectedTopic}/>\n                    <Button text=\"Создать топик\" handleButton={createNewSubjectTopic}/>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default SubjectForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}