{"ast":null,"code":"import axios from\"../../config/axios\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PublicationItem=_ref=>{let{authorName,publicationId,publicationTitle,handleClick}=_ref;const handle=()=>{handleClick(publicationId);};const[isAdmin,setIsAdmin]=useState(false);useEffect(()=>{if(JSON.parse(sessionStorage.getItem('user'))===null){setIsAdmin(false);}else if(JSON.parse(sessionStorage.getItem('user')).role==='Администратор'){setIsAdmin(true);}},[]);const deletePublication=()=>{return axios.delete('/publications/'+publicationId,{headers:{\"Access-Control-Allow-Origin\":\"*\"},withCredentials:true}).then(response=>{return response.data;}).catch(error=>{return error.response.data;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex mr-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cursor-pointer mx-auto mb-3 justify-items-center w-[80%]\",onClick:handle,children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\",children:publicationTitle}),/*#__PURE__*/_jsxs(\"h5\",{className:\"text-xs dark:text-white\",children:[\"\\u0410\\u0432\\u0442\\u043E\\u0440 \\u043F\\u043E\\u0441\\u0442\\u0430 - \",authorName]})]})},publicationId),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"text-white ml-auto mb-auto w-[10%] cursor-pointer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 text-black rounded\",onClick:deletePublication,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})})]});};export default PublicationItem;","map":{"version":3,"names":["axios","useEffect","useState","jsx","_jsx","jsxs","_jsxs","PublicationItem","_ref","authorName","publicationId","publicationTitle","handleClick","handle","isAdmin","setIsAdmin","JSON","parse","sessionStorage","getItem","role","deletePublication","delete","headers","withCredentials","then","response","data","catch","error","className","children","onClick"],"sources":["/home/kalin/IdeaProjects/tinkoff-project-develop/src/frontend/src/components/items/PublicationItem.js"],"sourcesContent":["import axios from \"../../config/axios\";\nimport {useEffect, useState} from \"react\";\n\nconst PublicationItem = ({authorName, publicationId, publicationTitle, handleClick}) => {\n\n    const handle = () => {\n        handleClick(publicationId);\n    }\n\n    const [isAdmin, setIsAdmin] = useState(false);\n\n    useEffect(() => {\n        if (JSON.parse(sessionStorage.getItem('user')) === null) {\n            setIsAdmin(false);\n        }\n        else if (JSON.parse(sessionStorage.getItem('user')).role === 'Администратор') {\n            setIsAdmin(true);\n        }\n    }, []);\n\n    const deletePublication = () => {\n        return axios\n            .delete('/publications/' + publicationId, {\n                headers: {\n                    \"Access-Control-Allow-Origin\": \"*\"\n                },\n                withCredentials: true\n            })\n            .then((response) => {\n                return response.data;\n            })\n            .catch((error) => {\n                return error.response.data;\n            })\n    }\n\n    return (\n        <div className=\"flex mr-0\">\n            <div className=\"cursor-pointer mx-auto mb-3 justify-items-center w-[80%]\" key={publicationId}\n                 onClick={handle}>\n                <div\n                    className=\"text-center block p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700\">\n                    <h5 className=\"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white\">{publicationTitle}</h5>\n                    <h5 className=\"text-xs dark:text-white\">Автор поста - {authorName}</h5>\n                </div>\n            </div>\n            {\n                isAdmin &&\n                <div className=\"text-white ml-auto mb-auto w-[10%] cursor-pointer\">\n                    <div className=\"bg-gray-50 text-black rounded\" onClick={deletePublication}>\n                        Удалить\n                    </div>\n                </div>\n            }\n        </div>\n\n    )\n\n}\n\nexport default PublicationItem;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,oBAAoB,CACtC,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,KAAM,CAAAC,eAAe,CAAGC,IAAA,EAAgE,IAA/D,CAACC,UAAU,CAAEC,aAAa,CAAEC,gBAAgB,CAAEC,WAAW,CAAC,CAAAJ,IAAA,CAE/E,KAAM,CAAAK,MAAM,CAAGA,CAAA,GAAM,CACjBD,WAAW,CAACF,aAAa,CAAC,CAC9B,CAAC,CAED,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAE7CD,SAAS,CAAC,IAAM,CACZ,GAAIe,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAK,IAAI,CAAE,CACrDJ,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,IACI,IAAIC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACC,IAAI,GAAK,eAAe,CAAE,CAC1EL,UAAU,CAAC,IAAI,CAAC,CACpB,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,iBAAiB,CAAGA,CAAA,GAAM,CAC5B,MAAO,CAAArB,KAAK,CACPsB,MAAM,CAAC,gBAAgB,CAAGZ,aAAa,CAAE,CACtCa,OAAO,CAAE,CACL,6BAA6B,CAAE,GACnC,CAAC,CACDC,eAAe,CAAE,IACrB,CAAC,CAAC,CACDC,IAAI,CAAEC,QAAQ,EAAK,CAChB,MAAO,CAAAA,QAAQ,CAACC,IAAI,CACxB,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CACd,MAAO,CAAAA,KAAK,CAACH,QAAQ,CAACC,IAAI,CAC9B,CAAC,CAAC,CACV,CAAC,CAED,mBACIrB,KAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtB3B,IAAA,QAAK0B,SAAS,CAAC,0DAA0D,CACpEE,OAAO,CAAEnB,MAAO,CAAAkB,QAAA,cACjBzB,KAAA,QACIwB,SAAS,CAAC,wJAAwJ,CAAAC,QAAA,eAClK3B,IAAA,OAAI0B,SAAS,CAAC,sEAAsE,CAAAC,QAAA,CAAEpB,gBAAgB,CAAK,CAAC,cAC5GL,KAAA,OAAIwB,SAAS,CAAC,yBAAyB,CAAAC,QAAA,EAAC,kEAAc,CAACtB,UAAU,EAAK,CAAC,EACtE,CAAC,EANqEC,aAO1E,CAAC,CAEFI,OAAO,eACPV,IAAA,QAAK0B,SAAS,CAAC,mDAAmD,CAAAC,QAAA,cAC9D3B,IAAA,QAAK0B,SAAS,CAAC,+BAA+B,CAACE,OAAO,CAAEX,iBAAkB,CAAAU,QAAA,CAAC,4CAE3E,CAAK,CAAC,CACL,CAAC,EAET,CAAC,CAId,CAAC,CAED,cAAe,CAAAxB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}